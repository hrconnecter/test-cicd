name: Central Workflow

on:
  workflow_dispatch:  # ğŸš€ Manual trigger for the workflow

jobs:
  run-build:  # ğŸ”§ Build Job
    # ğŸ› ï¸ Step 1: Run the build pipeline
    uses: ./.github/workflows/build.yaml

  run-sonarqube:  # ğŸ” SonarQube Code Analysis
    needs: run-build
    # ğŸ§ª Step 2: Run static code analysis using SonarQube
    uses: ./.github/workflows/SonarQube.yml
    with:
      SONAR_HOST_URL: http://13.202.182.26:9000
    secrets:
      SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}

  run-selenium:  # ğŸ§ª Selenium Tests
    needs: run-sonarqube
    # âœ… Step 3: Run end-to-end Selenium tests after SonarQube analysis
    uses: ./.github/workflows/Selenium.yml
